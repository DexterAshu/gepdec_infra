<div class="content-wrapper">
    <div class="row">
        <div class="col-md-12 grid-margin">
          <div class="d-flex justify-content-between flex-wrap">
            <div class="d-flex align-items-end flex-wrap">
              <div class="mr-md-3 mr-xl-5">
                <h4 class="page-title" onclick="goBack()"><i class="mdi mdi-chevron-left mdi-2"></i>Bid Qualification Process </h4>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-end flex-wrap">
                
            </div>
          </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                  
                    <div class="d-flex my-10">
                        <div class="col-lg-5">
                            <input type="search" class="form-control form-control-sm" [(ngModel)]="searchText" placeholder="Search">
                        </div>
                        <div class="col-lg-7">
                            <button type="button" class="btn btn-light btn-fw btn-sm me-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
                                    <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z"/>
                                  </svg> &nbsp;&nbsp;
                                Attachments</button>
                            <button type="button" class="btn btn-success btn-fw btn-sm me-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2-square" viewBox="0 0 16 16">
                                    <path d="M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z"/>
                                    <path d="m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0"/>
                                  </svg> &nbsp;&nbsp;
                                Approved</button>
                            <button type="button" class="btn btn-warning btn-fw btn-sm me-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-activity" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2"/>
                                  </svg> &nbsp;&nbsp;
                                Pending</button>
                            <button type="button" class="btn btn-danger btn-fw btn-sm me-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                                  </svg> &nbsp;&nbsp;
                                Rejected</button>
                            <button type="button" data-bs-toggle="modal" data-bs-target="#createModal" (click)="createForm()" class="btn btn-primary btn-fw btn-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                                  </svg>
                                Create New</button>
                        </div>
                    </div>
                    <app-responsive-table> <!-- Coming for sharedComponent/responsive-table -->
                        <thead class="table-primary text-nowrap">
                            <tr>
                                <th>S No</th>
                                <th>Tender Ref. No</th>
                                <th>Company Name</th>
                                <th>Tender Name</th>
                                <th>Tender Type</th>
                                <th>Tender Price</th>
                                <th>Created By</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody class="text-nowrap" *ngIf="companyData.length">
                            <tr *ngFor="let a of companyData | filter: searchText| paginate: { itemsPerPage: limit, currentPage: p }; index as i">
                                <td>{{ limit*(p-1)+i+1 }}</td>
                                <td>{{ a.company_id }}</td>
                                <td>{{ a.company_name }}</td>
                                <td>{{ a.company_type }}</td>
                                <td>{{ a.name }}</td>
                                <td>{{ a.doi | date: 'dd/MM/yyyy' }}</td>
                                <td>{{ a.created }}</td>
                                <td>
                                    <a data-bs-toggle="modal" data-bs-target="#createModal" title="Instant Data Profile" (click)="getDetails(a)"><span class="mdi mdi-account-edit cursor-pointer mdi-18px"></span></a>
                                </td>
                              </tr>
                            <tr *ngIf="isNotFound == true">
                                <td colspan="15" class="text-center">
                                    <div class="spinner-border"> </div>
                                </td>
                            </tr>
                            <tr *ngIf="companyData?.length == 0">
                                <td colspan="15" class="text-center">
                                    <div class="text-warning fw-semibold">Looks like no data available!</div>
                                </td>
                            </tr>
                        </tbody>
                    </app-responsive-table>
                    <div class="pagination-sec text-center">
                        <pagination-controls (pageChange)="p = $event"></pagination-controls>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- create modal -->
<div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Bid Qualification Criteria</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <form [formGroup]="form" (ngSubmit)="onSubmit()">

                        <div class="card p-2">
                        <div class="row">
                            <h6>Bid | Tender Information:</h6>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label">Tender Company Name<span class="required-asterisk">*</span></label>
                                        <input formControlName="tender_company_name" type="text" class="form-control form-control-sm" placeholder="Enter company name" appWordCapitalize>
                                        <div *ngIf="f['tender_company_name'].touched && f['tender_company_name'].invalid">
                                            <small class="text-danger" *ngIf="f['tender_company_name'].errors?.['required']">*Required</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label">Tender Title<span class="required-asterisk">*</span></label>
                                        <textarea formControlName="tender_title" type="text" class="form-control form-control-sm" placeholder="Enter Tender Title" appWordCapitalize>
                                       </textarea>
                                            <div *ngIf="f['tender_title'].touched && f['tender_title'].invalid">
                                            <small class="text-danger" *ngIf="f['tender_title'].errors?.['required']">*Required</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label">Tender Ref. No<span class="required-asterisk">*</span></label>
                                        <input formControlName="tender_ref_no" type="text" class="form-control form-control-sm" placeholder="Enter Tender Ref. Number" appWordCapitalize>
                                        <div *ngIf="f['tender_ref_no'].touched && f['tender_ref_no'].invalid">
                                            <small class="text-danger" *ngIf="f['tender_ref_no'].errors?.['required']">*Required</small>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                           
                        </div>

                        <div class="card mt-1 p-2">
                            <div class="row">
                                <h6>Technical Qualification:</h6>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label">Technical Bid Points<span class="required-asterisk">*</span></label>
                                        <textarea formControlName="technical_qualification" type="text" class="form-control form-control-sm" placeholder="Put your bid points one by one..." appWordCapitalize>
                                       </textarea>
                                            <div *ngIf="f['technical_qualification'].touched && f['technical_qualification'].invalid">
                                            <small class="text-danger" *ngIf="f['technical_qualification'].errors?.['required']">*Required</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group">
                                    <label class="form-label">Bid Points Eligibility Criteria:<span class="required-asterisk">*</span> </label>
                                    <div>
                                      <label>
                                        <input type="radio" formControlName="eligibility" value="true" data-bs-toggle="modal" data-bs-target="#eligibilityModal"> &nbsp;&nbsp; Yes
                                      </label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                      <label>
                                        <input type="radio" formControlName="eligibility" value="false"> &nbsp;&nbsp; No
                                      </label>
                                    </div>
                                    <div *ngIf="f['eligibility'].touched && f['eligibility'].invalid">
                                        <small class="text-danger" *ngIf="f['eligibility'].errors?.['required']">Please select Yes or No.</small>
                                    </div>
                                    </div>
                                  </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                    <label class="form-label">Bid Points Condition:<span class="required-asterisk">*</span> </label>
                                    <div>
                                      <label>
                                        <input type="radio" formControlName="bid_condition" value="true"> &nbsp;&nbsp; AND
                                      </label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                      <label>
                                        <input type="radio" formControlName="bid_condition" value="false"> &nbsp;&nbsp; OR
                                      </label>
                                    </div>
                                    <div *ngIf="f['bid_condition'].touched && f['bid_condition'].invalid">
                                        <small class="text-danger" *ngIf="f['bid_condition'].errors?.['required']">Please select Yes or No.</small>
                                    </div>
                                    </div>
                                  </div>
                                  <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="form-label">Dependency<span class="required-asterisk">*</span></label>
                                        <select formControlName="dependency" class="form-select form-select-sm">
                                            <option [selected]="true" [disabled]="true" [value]="null">Select Dependency</option>
                                            <option value="or">OR</option>
                                            <option value="and">AND</option>
                                            <option value="all">All</option>
                                            <!-- <option *ngFor="let c of tenderType" value="{{c.bidtype_id}}">{{ c.bidtype }}</option> -->
                                        </select>
                                        <div *ngIf="f['dependency'].touched && f['dependency'].invalid">
                                            <small class="text-danger" *ngIf="f['dependency'].errors?.['required']">*Required</small>
                                        </div>
                                    </div>
                                </div>


                                  <div class="">
                                      <button type="button" [disabled]="!form.valid" class="float-right btn btn-primary tn-fw btn-sm" (click)="toggleVisibility()">+ ADD</button>
                                  </div>

                                    <app-responsive-table *ngIf="!isVisible"> <!-- Coming for sharedComponent/responsive-table -->
                                    <thead class="table-primary text-nowrap mt-2" >
                                        <tr>
                                            <th>S No</th>
                                            <th>Bid points Eligibility</th>
                                            <th>Bid Points Condition</th>
                                            <th>Bid Dependency</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-nowrap" *ngIf="companyData.length" >
                                        <tr *ngFor="let a of companyData | filter: searchText| paginate: { itemsPerPage: limit, currentPage: p }; index as i">
                                            <td>{{ limit*(p-1)+i+1 }}</td>
                                            <td>{{ a.company_id }}</td>
                                            <td>{{ a.company_name }}</td>
                                            <td>{{ a.company_name }}</td>
                                            <td>
                                                <a data-bs-toggle="modal" data-bs-target="#createModal" title="Delete record"><span class="mdi mdi-delete-circle cursor-pointer mdi-18px"></span></a>
                                            </td>
                                            </tr>
                                        
                                    </tbody>
                                </app-responsive-table>
                                <div class="" *ngIf="!isVisible">
                                    <button type="button" [disabled]="!form.valid" class="float-right btn btn-success tn-fw btn-sm" data-bs-dismiss="modal">Submit</button>
                                </div>


                            </div>
                        </div>

                        <div class="row mt-2">
                            <div class="modal-btns">
                                <button type="submit" *ngIf="!isSubmitted" [disabled]="!form.valid" class="btn btn-primary btn-fw btn-sm mr-2">{{button}}</button>
                                <button type="button" *ngIf="isSubmitted" disabled class="btn btn-primary btn-fw btn-sm mr-2"><span class="spinner-border spinner-border-sm" aria-hidden="true"></span> Adding...</button>
                                <button type="button" id="cancel" class="btn btn-secondary btn-fw btn-sm" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- create modal end-->


<!-- create Eligibility YES modal -->
<div class="modal fade" id="eligibilityModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Bid Remarks & Evidences:</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-bs-toggle="modal" data-bs-target="#createModal"></button>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <form [formGroup]="form" (ngSubmit)="onSubmit()">

                            <div class="row">
                                <!-- <h6>Remarks & Evidences:</h6> -->
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="form-label">Description<span class="required-asterisk">*</span></label>
                                        <textarea formControlName="remarks" type="text" class="form-control form-control-sm" placeholder="Describe your bid points..." appWordCapitalize>
                                       </textarea>
                                            <div *ngIf="f['remarks'].touched && f['remarks'].invalid">
                                            <small class="text-danger" *ngIf="f['remarks'].errors?.['required']">*Required</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <div class="row ">
                                            <div class="col-lg-12 col-sm-6">
                                              <label id="label1"> Upload Evidence </label><br>
                                              <input id="cin" name="cin" type="file" formControlName="file" (change)="fileChangeEvent($event.target)"
                                                placeholder="Upload a file..." multiple />
                                            </div>
                                            <!-- <div class="col-lg-12" style="text-align:left">
                      
                                              <button type="button" class="btn btn-outline-primary mt-3 ">View Attachments</button>
                                            </div> -->
                                          </div>
                                    </div>
                                </div>

                            </div>
                       

                        <div class="row mt-2">
                            <div class="modal-btns">
                                <button type="submit" [disabled]="!f['remarks'].valid" data-bs-toggle="modal" data-bs-target="#createModal" class="btn btn-primary btn-fw btn-sm mr-2">+ ADD</button>
                                <!-- <button type="button"  disabled class="btn btn-primary btn-fw btn-sm mr-2"><span class="spinner-border spinner-border-sm" aria-hidden="true"></span> Adding...</button> -->
                               
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Eligibility YES modal end-->